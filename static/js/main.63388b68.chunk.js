(this.webpackJsonprevisionist=this.webpackJsonprevisionist||[]).push([[0],{82:function(e,t,a){e.exports=a(98)},98:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(8),o=a.n(c),i=a(26),l=a(68),s=a(140),u=a(141),m=a(142),p=a(41),d=a(29),E=a(40),g=a(32),f=a(3),h=a(126),b=a(127),v=a(128),w=a(31),y=a(129),k=a(130),j=a(131),O=a(145),x=a(134),S=a(124),N=a(125),C=a(144),B=a(135),U=a(71),I=a.n(U),D=a(70),F=a.n(D),P=a(69),L=a.n(P),H=a(72),R=a.n(H),T=a(121),J=a(101),W=a(62),z=a.n(W),A=a(64),q=a.n(A),M=a(63),G=a.n(M),K=a(66),_=a.n(K),X=a(67),$=a.n(X),Q=a(65),V=a.n(Q),Y=r.a.forwardRef((function(e,t){return r.a.createElement(p.b,Object.assign({innerRef:t},e))}));function Z(){return r.a.createElement(T.a,null,r.a.createElement(J.a,{button:!0,component:Y,to:"/"},r.a.createElement(S.a,null,r.a.createElement(z.a,null)),r.a.createElement(N.a,{primary:"Dashboard"})),r.a.createElement(J.a,{button:!0,component:Y,to:"/expansions"},r.a.createElement(S.a,null,r.a.createElement(G.a,null)),r.a.createElement(N.a,{primary:"Expansions"})),r.a.createElement(J.a,{button:!0,component:Y,to:"/units"},r.a.createElement(S.a,null,r.a.createElement(q.a,null)),r.a.createElement(N.a,{primary:"Units"})),r.a.createElement(J.a,{button:!0,component:Y,to:"/upgrades"},r.a.createElement(S.a,null,r.a.createElement(V.a,null)),r.a.createElement(N.a,{primary:"Upgrades"})),r.a.createElement(J.a,{button:!0,component:Y,to:"/command-cards"},r.a.createElement(S.a,null,r.a.createElement(_.a,null)),r.a.createElement(N.a,{primary:"Command Cards"})),r.a.createElement(J.a,{button:!0,component:Y,to:"/keywords"},r.a.createElement(S.a,null,r.a.createElement($.a,null)),r.a.createElement(N.a,{primary:"Keywords"})))}var ee=Object(l.a)((function(e){return{toolbar:{paddingRight:24},toolbarIcon:Object(g.a)({display:"flex",alignItems:"center",justifyContent:"flex-end",padding:"0 8px"},e.mixins.toolbar),appBar:{zIndex:e.zIndex.drawer+1,transition:e.transitions.create(["width","margin"],{easing:e.transitions.easing.sharp,duration:e.transitions.duration.leavingScreen})},appBarShift:{marginLeft:240,width:"calc(100% - ".concat(240,"px)"),transition:e.transitions.create(["width","margin"],{easing:e.transitions.easing.sharp,duration:e.transitions.duration.enteringScreen})},menuButton:{marginRight:36},menuButtonHidden:{display:"none"},title:{flexGrow:1},drawerPaper:{position:"relative",whiteSpace:"nowrap",width:240,transition:e.transitions.create("width",{easing:e.transitions.easing.sharp,duration:e.transitions.duration.enteringScreen})},drawerPaperClose:Object(E.a)({overflowX:"hidden",transition:e.transitions.create("width",{easing:e.transitions.easing.sharp,duration:e.transitions.duration.leavingScreen}),width:e.spacing(7)},e.breakpoints.up("sm"),{width:e.spacing(9)}),appBarSpacer:e.mixins.toolbar,content:{flexGrow:1,height:"100vh",overflow:"auto"},container:{paddingTop:e.spacing(4),paddingBottom:e.spacing(4)},paper:{padding:e.spacing(2),display:"flex",overflow:"auto",flexDirection:"column"},fixedHeight:{height:240},buttonProgress:{color:"white",position:"absolute",top:"50%",left:"50%",marginTop:-12,marginLeft:-12},loginWrapper:{margin:e.spacing(1),position:"relative"}}}));function te(e){var t=ee(),a=e.authenticated,c=e.authenticating,o=e.gitHubUser,l=e.open,s=e.onDrawerOpen,u=e.onDrawerClose,m=e.onLoginClick,p=e.onLogoutClick,d=Object(n.useState)(null),E=Object(i.a)(d,2),g=E[0],U=E[1],D=function(){U(null)};return r.a.createElement(r.a.Fragment,null,r.a.createElement(h.a,{position:"absolute",className:Object(f.a)(t.appBar,l&&t.appBarShift)},r.a.createElement(b.a,{className:t.toolbar},r.a.createElement(v.a,{edge:"start",color:"inherit","aria-label":"open drawer",onClick:function(){return s()},className:Object(f.a)(t.menuButton,l&&t.menuButtonHidden)},r.a.createElement(L.a,null)),r.a.createElement(w.a,{variant:"h6",className:t.title},"Star Wars Legion Data"),r.a.createElement("div",{className:t.loginWrapper},!a&&r.a.createElement(y.a,{color:"inherit",onClick:function(){return m()},disabled:c},"Login"),c&&r.a.createElement(k.a,{size:24,className:t.buttonProgress}),a&&!c&&o&&r.a.createElement(r.a.Fragment,null,r.a.createElement(v.a,{onClick:function(e){U(e.currentTarget)},size:"small"},r.a.createElement(j.a,{src:o.avatarUrl})),r.a.createElement(O.a,{id:"user-menu",anchorEl:g,keepMounted:!0,open:Boolean(g),onClose:D},r.a.createElement(x.a,{onClick:function(){D(),o&&window.open("https://github.com/".concat(o.login),"_blank")}},r.a.createElement(S.a,null,r.a.createElement(F.a,null)),r.a.createElement(N.a,{primary:"@".concat(o.login)})),r.a.createElement(x.a,{onClick:function(){D(),p()}},r.a.createElement(S.a,null,r.a.createElement(I.a,null)),r.a.createElement(N.a,{primary:"Logout"}))))))),r.a.createElement(C.a,{variant:"permanent",classes:{paper:Object(f.a)(t.drawerPaper,!l&&t.drawerPaperClose)},open:l},r.a.createElement("div",{className:t.toolbarIcon},r.a.createElement(v.a,{onClick:function(){return u()}},r.a.createElement(R.a,null))),r.a.createElement(B.a,null),r.a.createElement(Z,null),r.a.createElement(B.a,null)))}var ae=a(74),ne={main:"#9c27b0",light:"#d05ce3",dark:"#6a0080"},re=Object(ae.a)({palette:{type:"dark",primary:{main:"#424242",light:"#6d6d6d",dark:"#1b1b1b"},secondary:ne},overrides:{MuiAvatar:{colorDefault:{backgroundColor:ne.main,color:"white"}}}}),ce=a(139),oe=a(136),ie=a(137),le=a(146),se=a(138);function ue(e){return e.charAt(0).toUpperCase()+e.slice(1)}function me(e){return e.map((function(e){return"object"===typeof e?e.name:"".concat(e)})).sort((function(e,t){return e<t?-1:1})).join(", ")}var pe=Object(l.a)((function(e){return{avatarUnreleased:{backgroundColor:e.palette.primary.light,color:e.palette.primary.contrastText}}}));function de(e){var t=e.data,a=e.lookupUnitName,n=e.lookupUpgradeName,c=pe(),o="released in wave ".concat(t.wave);return t.released||(o="to be ".concat(o)),r.a.createElement(oe.a,{id:t.ldf},r.a.createElement(ie.a,{avatar:r.a.createElement(le.a,{title:ue(o)},r.a.createElement(j.a,{className:t.released?"":c.avatarUnreleased},t.wave)),title:t.name}),r.a.createElement(se.a,null,r.a.createElement(ce.a,{container:!0,direction:"row",spacing:2},r.a.createElement(ce.a,{item:!0,xs:6},r.a.createElement(w.a,{component:"p",variant:"subtitle2",color:"textPrimary"},"Units"),t.contents.units&&Object.keys(t.contents.units).map((function(e){return r.a.createElement(w.a,{key:"".concat(t.ldf,"-").concat(e),component:"p",variant:"body2",color:"textSecondary"},a(e),":"," ",t.contents.units&&t.contents.units[e])}))),r.a.createElement(ce.a,{item:!0,xs:6},r.a.createElement(w.a,{component:"p",variant:"subtitle2",color:"textPrimary"},"Upgrades"),t.contents.upgrades&&Object.keys(t.contents.upgrades).map((function(e){return r.a.createElement(w.a,{key:"".concat(t.ldf,"-").concat(e),component:"p",variant:"body2",color:"textSecondary"},n(e),":"," ",t.contents.upgrades&&t.contents.upgrades[e])}))))))}function Ee(e){return r.a.createElement(r.a.Fragment,null,r.a.createElement(w.a,{component:"h3",variant:"h3"},e.title),r.a.createElement("br",null),r.a.createElement(B.a,null),r.a.createElement("br",null))}var ge=a(30),fe=a.n(ge);var he={data:{units:{},upgrades:{},sources:[],commandCards:[]},unitNames:{},upgradeNames:{}},be=Object(n.createContext)({state:he,dispatch:function(){}}),ve=function(e,t){switch(t.type){case"unit-names-changed":return Object(g.a)({},e,{unitNames:t.unitNames});case"upgrade-names-changed":return Object(g.a)({},e,{upgradeNames:t.upgradeNames});case"legion-data-changed":return Object(g.a)({},e,{data:Object(g.a)({},t.data)});default:return e}},we=function(){return Object(n.useContext)(be)};function ye(e,t){return e.wave===t.wave?e.name<t.name?-1:1:e.wave<t.wave?-1:1}function ke(){var e=we().state,t=e.data,a=e.unitNames,n=e.upgradeNames,c=t.sources,o=function(e){var t=a[e];return t||e},i=function(e){var t=n[e];return t||e};return r.a.createElement(r.a.Fragment,null,r.a.createElement(Ee,{title:"Expansions"}),r.a.createElement(ce.a,{container:!0,spacing:2,direction:"row",justify:"space-between",alignItems:"stretch"},c.sort(ye).map((function(e){return r.a.createElement(ce.a,{key:e.ldf,item:!0,xs:12},r.a.createElement(de,{data:e,lookupUnitName:o,lookupUpgradeName:i}))}))))}function je(e){var t=e.surge;return r.a.createElement(ce.a,{container:!0,direction:"row",spacing:1},r.a.createElement(ce.a,{item:!0},"Surge:"),t.attack&&r.a.createElement(ce.a,{item:!0},"Attack: ",ue(t.attack),t.defense&&","),t.defense&&r.a.createElement(ce.a,{item:!0},"Defense: ",ue(t.defense)))}function Oe(e){var t=e.range,a="";return 0===t.to?a="Melee":(a="".concat(0===t.from?"Melee":t.from),t.from!==t.to&&(a="".concat(a).concat(0===t.from?" / ":" - "),a="".concat(a).concat(t.to?t.to:"\u221e"))),r.a.createElement(ce.a,{container:!0,direction:"row",spacing:1},r.a.createElement(ce.a,{item:!0},"Range: ",a))}function xe(e){var t=e.keywords;return r.a.createElement("div",null,"Keywords: ",me(t))}function Se(e){var t=e.dice;return r.a.createElement(ce.a,{container:!0,direction:"row",spacing:1},r.a.createElement(ce.a,{item:!0,xs:3},"Dice:"),t.red&&r.a.createElement(ce.a,{item:!0,xs:3},"Red: ",t.red),t.black&&r.a.createElement(ce.a,{item:!0,xs:3},"Black: ",t.black),t.white&&r.a.createElement(ce.a,{item:!0,xs:3},"White: ",t.white))}function Ne(e){var t=e.weapon;return r.a.createElement(oe.a,{raised:!0},r.a.createElement(se.a,null,t.name&&r.a.createElement(w.a,{variant:"subtitle1",component:"h2",gutterBottom:!0},t.name),r.a.createElement(Oe,{range:t.range}),r.a.createElement(Se,{dice:t.dice}),t.surge&&r.a.createElement(je,{surge:t.surge}),t.keywords&&r.a.createElement(xe,{keywords:t.keywords})))}var Ce=a(100),Be=Object(Ce.a)({anchor:{display:"block",position:"relative",top:-100,visibility:"hidden"}});function Ue(e){var t=Be();return r.a.createElement("div",{className:t.anchor,id:e.id})}function Ie(e){var t=e.commandCard;return r.a.createElement(r.a.Fragment,null,r.a.createElement(Ue,{id:t.ldf}),r.a.createElement(oe.a,null,r.a.createElement(ie.a,{avatar:r.a.createElement(le.a,{title:"".concat(t.pips," pip").concat(1!==t.pips?"s":"")},r.a.createElement(j.a,null,t.pips)),title:t.name,subheader:r.a.createElement(w.a,{variant:"subtitle2"},t.orders)}),r.a.createElement(se.a,null,t.description&&r.a.createElement("div",null,t.description),t.weapon&&r.a.createElement(Ne,{weapon:t.weapon}))))}function De(){var e=we().state.data.commandCards;return r.a.createElement(r.a.Fragment,null,r.a.createElement(Ee,{title:"Command Cards"}),r.a.createElement(ce.a,{container:!0,spacing:3,direction:"row"},e.sort((function(e,t){return e.pips===t.pips?e.name<t.name?-1:1:e.pips<t.pips?-1:1})).map((function(e){return r.a.createElement(ce.a,{item:!0,key:"cc-".concat(e.ldf),sm:12,lg:4},r.a.createElement(Ie,{commandCard:e}))}))))}function Fe(){return r.a.createElement(r.a.Fragment,null,r.a.createElement("br",null),r.a.createElement(B.a,null),r.a.createElement("br",null))}function Pe(e){return r.a.createElement(r.a.Fragment,null,r.a.createElement(Fe,null),r.a.createElement("div",null,e.children))}function Le(e){var t=e.upgrade;return r.a.createElement(oe.a,null,r.a.createElement(Ue,{id:t.ldf}),r.a.createElement(ie.a,{title:t.name,avatar:r.a.createElement(le.a,{title:"".concat(t.points," points")},r.a.createElement(j.a,null,t.points))}),r.a.createElement(se.a,null,t.restrictions&&r.a.createElement(Pe,null,"Restrictions: ",t.restrictions.name),!0===t.exhaust&&r.a.createElement(Pe,null,"Exhaustable"),t.keywords&&r.a.createElement(Pe,null,"Keywords: ",me(t.keywords)),t.description&&r.a.createElement(Pe,null,"Description: ",t.description),t.weapon&&r.a.createElement(Pe,null,r.a.createElement(Ne,{weapon:t.weapon}))))}function He(){var e=we().state.data.upgrades;return r.a.createElement(r.a.Fragment,null,r.a.createElement(Ee,{title:"Upgrades"}),Object.keys(e).sort((function(e,t){return e<t?-1:1})).map((function(t){return r.a.createElement("div",{key:"upgrade-group-".concat(t)},r.a.createElement(w.a,{variant:"h5",gutterBottom:!0},t),r.a.createElement(ce.a,{container:!0,spacing:2,direction:"row"},e[t].sort((function(e,t){return e.points===t.points?e.name<t.name?-1:1:e.points<t.points?-1:1})).map((function(e){return r.a.createElement(ce.a,{item:!0,key:"upgrade-".concat(e.ldf),sm:12,lg:3},r.a.createElement(Le,{upgrade:e}))}))),r.a.createElement("br",null),r.a.createElement(B.a,null),r.a.createElement("br",null))})))}function Re(e){var t=e.unit;return r.a.createElement(oe.a,null,r.a.createElement(ie.a,{title:t.name,avatar:r.a.createElement(le.a,{title:"".concat(t.points," points")},r.a.createElement(j.a,null,t.points))}))}function Te(){var e=we().state.data.units;return r.a.createElement(r.a.Fragment,null,r.a.createElement(Ee,{title:"Units"}),Object.keys(e).sort((function(e,t){return e<t?-1:1})).map((function(t){return r.a.createElement("div",{key:t},r.a.createElement(w.a,{variant:"h5",gutterBottom:!0},t),r.a.createElement(ce.a,{container:!0,spacing:2,direction:"row"},e[t].sort((function(e,t){return e.points===t.points?e.name<t.name?-1:1:e.points<t.points?-1:1})).map((function(e){return r.a.createElement(ce.a,{item:!0,key:e.ldf,sm:3},r.a.createElement(Re,{unit:e}))}))),r.a.createElement("br",null),r.a.createElement(B.a,null),r.a.createElement("br",null))})))}var Je=Object(l.a)((function(e){return{root:{display:"flex"},appBarSpacer:e.mixins.toolbar,content:{flexGrow:1,height:"100vh",overflow:"auto"},container:{paddingTop:e.spacing(4),paddingBottom:e.spacing(4)}}})),We=function(){var e=we().dispatch,t=Je(),a=Object(n.useState)(JSON.parse(localStorage.getItem("open")||"true")),c=Object(i.a)(a,2),o=c[0],l=c[1],E=Object(n.useState)(!1),g=Object(i.a)(E,2),f=g[0],h=g[1],b=Object(n.useState)(sessionStorage.getItem("token")||""),v=Object(i.a)(b,2),w=v[0],y=v[1],k=Object(n.useState)(JSON.parse(sessionStorage.getItem("gitHubUser")||"null")),j=Object(i.a)(k,2),O=j[0],x=j[1];Object(n.useEffect)((function(){localStorage.setItem("open",JSON.stringify(o))}),[o]),Object(n.useEffect)((function(){sessionStorage.setItem("token",w)}),[w]),Object(n.useEffect)((function(){sessionStorage.setItem("gitHubUser",JSON.stringify(O))}),[O]),Object(n.useEffect)((function(){(function(e){var t;return fe.a.async((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,fe.a.awrap(fetch("https://cdn.jsdelivr.net/gh/andrelind/legion-data@".concat(e,"/out/legion-data.json")));case 2:return t=a.sent,a.next=5,fe.a.awrap(t.json());case 5:return a.abrupt("return",a.sent);case 6:case"end":return a.stop()}}))})("".concat("master")).then((function(t){var a={};Object.keys(t.units).forEach((function(e){t.units[e].forEach((function(e){a[e.ldf]=e.name}))}));var n={};Object.keys(t.upgrades).forEach((function(e){t.upgrades[e].forEach((function(e){n[e.ldf]=e.name}))})),e({type:"unit-names-changed",unitNames:a}),e({type:"upgrade-names-changed",upgradeNames:n}),e({type:"legion-data-changed",data:t})}));var t=window.location.href.match(/\?code=(.*)/);if(t){var a=t[1];a&&(h(!0),fetch("".concat("https://swd-gatekeeper.herokuapp.com","/authenticate/").concat(a)).then((function(e){return e.json()})).then((function(e){var t=e.token;(function(e){var t,a;return fe.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:return"\n    query {\n      viewer {\n        name\n        login\n        avatarUrl\n      }\n    }\n  ",n.next=3,fe.a.awrap(fetch("https://api.github.com/graphql",{method:"POST",headers:{"Content-Type":"application/json",Accept:"application/json",Authorization:"Bearer ".concat(e)},body:JSON.stringify({query:"\n    query {\n      viewer {\n        name\n        login\n        avatarUrl\n      }\n    }\n  "})}));case 3:return t=n.sent,n.next=6,fe.a.awrap(t.json());case 6:return a=n.sent,n.abrupt("return",a.data.viewer);case 8:case"end":return n.stop()}}))})(t).then((function(e){h(!1),y(t),x(e),setTimeout((function(){return window.location.href=window.location.origin}),100)}))})))}}),[e]);return r.a.createElement(p.a,{basename:"/"},r.a.createElement(s.a,{theme:re},r.a.createElement("div",{className:t.root},r.a.createElement(u.a,null),r.a.createElement(te,{authenticated:""!==w,authenticating:f,gitHubUser:O,open:o,onDrawerOpen:function(){return l(!0)},onDrawerClose:function(){return l(!1)},onLoginClick:function(){h(!0),window.location.href="https://github.com/login/oauth/authorize?client_id=".concat("6db58777e72871fa0a21","&scope=user&redirect_uri=").concat("https://starwarsdev.github.io/revisionist/")},onLogoutClick:function(){y(""),x(null),sessionStorage.removeItem("item"),sessionStorage.removeItem("gitHubUser"),window.location.href=window.location.origin}}),r.a.createElement("main",{className:t.content},r.a.createElement("div",{className:t.appBarSpacer}),r.a.createElement(m.a,{maxWidth:"lg",className:t.container},r.a.createElement(d.c,null,r.a.createElement(d.a,{path:"/expansions"},r.a.createElement(ke,null)),r.a.createElement(d.a,{path:"/units"},r.a.createElement(Te,null)),r.a.createElement(d.a,{path:"/upgrades"},r.a.createElement(He,null)),r.a.createElement(d.a,{path:"/command-cards"},r.a.createElement(De,null))))))))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));o.a.render(r.a.createElement((function(e){var t=e.children,a=Object(n.useReducer)(ve,he),c=Object(i.a)(a,2),o=c[0],l=c[1];return r.a.createElement(be.Provider,{value:{state:o,dispatch:l}},t)}),null,r.a.createElement(We,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}},[[82,1,2]]]);
//# sourceMappingURL=main.63388b68.chunk.js.map